<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOLDER - Колесо Удачи</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            display: grid;
            grid-template-columns: 120px 1fr;
            min-height: 100vh;
        }

        /* Левая панель с логотипом */
        .sidebar {
            background: linear-gradient(180deg, #1e3c72 0%, #2a5298 100%);
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 4px 0 15px rgba(0, 0, 0, 0.3);
        }

        .logo {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            font-size: 28px;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            letter-spacing: 3px;
            margin-top: 20px;
        }

        .logo-subtitle {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            font-size: 12px;
            color: #a0c4ff;
            margin-top: 10px;
            letter-spacing: 1px;
        }

        /* Основной контент */
        .main-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(79, 172, 254, 0.3);
        }

        .subtitle {
            color: #8892b0;
            font-size: 16px;
        }

        /* Выбор ставки */
        .bet-selection {
            background: rgba(30, 41, 59, 0.8);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 400px;
            border: 1px solid #334155;
        }

        .bet-title {
            text-align: center;
            margin-bottom: 15px;
            color: #cbd5e1;
            font-size: 18px;
        }

        .bet-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .bet-btn {
            background: #1e293b;
            border: 2px solid #475569;
            color: #cbd5e1;
            padding: 12px 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 14px;
        }

        .bet-btn:hover {
            background: #334155;
            border-color: #60a5fa;
        }

        .bet-btn.active {
            background: linear-gradient(45deg, #2563eb, #3b82f6);
            border-color: #60a5fa;
            color: white;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
        }

        .balance {
            text-align: center;
            font-size: 18px;
            color: #60a5fa;
            font-weight: bold;
        }

        /* Колесо */
        .wheel-section {
            position: relative;
            margin: 30px 0;
        }

        .wheel-container {
            position: relative;
            width: 280px;
            height: 280px;
            margin: 0 auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67);
            box-shadow: 
                0 0 30px rgba(37, 99, 235, 0.3),
                inset 0 0 50px rgba(0, 0, 0, 0.8);
            border: 6px solid #1e40af;
            overflow: hidden;
        }

        .wheel.spinning {
            animation: spin 3s cubic-bezier(0.17, 0.67, 0.83, 0.67);
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(1260deg); /* 3.5 оборота */
            }
        }

        .wheel-sections {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .wheel-item {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .wheel-item:nth-child(1) { 
            transform: rotate(0deg);
            background: linear-gradient(45deg, #ef4444, #dc2626);
        }
        .wheel-item:nth-child(2) { 
            transform: rotate(45deg);
            background: linear-gradient(45deg, #f59e0b, #d97706);
        }
        .wheel-item:nth-child(3) { 
            transform: rotate(90deg);
            background: linear-gradient(45deg, #10b981, #059669);
        }
        .wheel-item:nth-child(4) { 
            transform: rotate(135deg);
            background: linear-gradient(45deg, #3b82f6, #2563eb);
        }
        .wheel-item:nth-child(5) { 
            transform: rotate(180deg);
            background: linear-gradient(45deg, #8b5cf6, #7c3aed);
        }
        .wheel-item:nth-child(6) { 
            transform: rotate(225deg);
            background: linear-gradient(45deg, #ec4899, #db2777);
        }
        .wheel-item:nth-child(7) { 
            transform: rotate(270deg);
            background: linear-gradient(45deg, #06b6d4, #0891b2);
        }
        .wheel-item:nth-child(8) { 
            transform: rotate(315deg);
            background: linear-gradient(45deg, #f97316, #ea580c);
        }

        .multiplier {
            transform: rotate(45deg);
            font-size: 18px;
            font-weight: bold;
        }

        .pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: #fbbf24;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.8));
        }

        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: #1e3a8a;
            border-radius: 50%;
            border: 4px solid #fbbf24;
            z-index: 5;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }

        /* Кнопка вращения */
        .spin-section {
            margin-top: 20px;
        }

        .spin-button {
            background: linear-gradient(45deg, #2563eb, #3b82f6);
            border: none;
            padding: 18px 50px;
            font-size: 20px;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(37, 99, 235, 0.4);
            font-weight: bold;
            letter-spacing: 1px;
        }

        .spin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(37, 99, 235, 0.6);
        }

        .spin-button:disabled {
            background: #475569;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Результат */
        .result {
            margin-top: 25px;
            padding: 20px;
            background: rgba(30, 41, 59, 0.9);
            border-radius: 15px;
            font-size: 18px;
            display: none;
            text-align: center;
            border: 1px solid #475569;
            width: 100%;
            max-width: 400px;
            backdrop-filter: blur(10px);
        }

        .result.win {
            border-color: #10b981;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }

        .result.jackpot {
            border-color: #fbbf24;
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .win-amount {
            font-size: 24px;
            font-weight: bold;
            color: #10b981;
            margin: 10px 0;
        }

        .jackpot-text {
            color: #fbbf24;
            font-size: 20px;
            font-weight: bold;
        }

        /* Статистика */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
            width: 100%;
            max-width: 400px;
        }

        .stat-item {
            background: rgba(30, 41, 59, 0.6);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #334155;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #60a5fa;
            margin-top: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #94a3b8;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Левая панель с логотипом -->
        <div class="sidebar">
            <div class="logo">FOLDER</div>
            <div class="logo-subtitle">CASINO</div>
        </div>

        <!-- Основной контент -->
        <div class="main-content">
            <div class="header">
                <h1 class="title">КОЛЕСО УДАЧИ</h1>
                <p class="subtitle">Крути и выигрывай с коэффициентами до 50x!</p>
            </div>

            <!-- Выбор ставки -->
            <div class="bet-selection">
                <div class="bet-title">ВЫБЕРИТЕ СТАВКУ</div>
                <div class="bet-buttons">
                    <button class="bet-btn active" data-bet="10">10 ₽</button>
                    <button class="bet-btn" data-bet="50">50 ₽</button>
                    <button class="bet-btn" data-bet="100">100 ₽</button>
                    <button class="bet-btn" data-bet="500">500 ₽</button>
                </div>
                <div class="balance">Баланс: <span id="balance">1 000</span> ₽</div>
            </div>

            <!-- Колесо -->
            <div class="wheel-section">
                <div class="wheel-container">
                    <div class="pointer"></div>
                    <div class="wheel" id="wheel">
                        <div class="wheel-sections">
                            <div class="wheel-item"><div class="multiplier">2x</div></div>
                            <div class="wheel-item"><div class="multiplier">3x</div></div>
                            <div class="wheel-item"><div class="multiplier">5x</div></div>
                            <div class="wheel-item"><div class="multiplier">10x</div></div>
                            <div class="wheel-item"><div class="multiplier">2x</div></div>
                            <div class="wheel-item"><div class="multiplier">3x</div></div>
                            <div class="wheel-item"><div class="multiplier">20x</div></div>
                            <div class="wheel-item"><div class="multiplier">50x</div></div>
                        </div>
                    </div>
                    <div class="center-circle"></div>
                </div>
            </div>

            <!-- Кнопка вращения -->
            <div class="spin-section">
                <button class="spin-button" id="spinButton">КРУТИТЬ КОЛЕСО</button>
            </div>

            <!-- Результат -->
            <div class="result" id="result">
                <div id="resultText"></div>
                <div class="win-amount" id="winAmount"></div>
            </div>

            <!-- Статистика -->
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">СТАВКА</div>
                    <div class="stat-value" id="currentBet">10 ₽</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">ВЫИГРЫШЕЙ</div>
                    <div class="stat-value" id="winsCount">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">КОЭФФИЦИЕНТ</div>
                    <div class="stat-value" id="currentMultiplier">-</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class WheelGame {
            constructor() {
                this.wheel = document.getElementById('wheel');
                this.spinButton = document.getElementById('spinButton');
                this.result = document.getElementById('result');
                this.resultText = document.getElementById('resultText');
                this.winAmount = document.getElementById('winAmount');
                this.balanceElement = document.getElementById('balance');
                this.currentBetElement = document.getElementById('currentBet');
                this.winsCountElement = document.getElementById('winsCount');
                this.currentMultiplierElement = document.getElementById('currentMultiplier');
                
                this.isSpinning = false;
                this.balance = 1000;
                this.currentBet = 10;
                this.winsCount = 0;
                
                // Секторы колеса с вероятностями
                this.sections = [
                    { multiplier: 2, probability: 30, angle: 0 },
                    { multiplier: 3, probability: 25, angle: 45 },
                    { multiplier: 5, probability: 15, angle: 90 },
                    { multiplier: 10, probability: 12, angle: 135 },
                    { multiplier: 2, probability: 8, angle: 180 },
                    { multiplier: 3, probability: 5, angle: 225 },
                    { multiplier: 20, probability: 3, angle: 270 },
                    { multiplier: 50, probability: 2, angle: 315 }
                ];
                
                this.init();
            }
            
            init() {
                this.spinButton.addEventListener('click', () => this.spin());
                
                // Обработчики кнопок ставок
                document.querySelectorAll('.bet-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.bet-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentBet = parseInt(e.target.dataset.bet);
                        this.currentBetElement.textContent = this.currentBet + ' ₽';
                    });
                });
                
                // Инициализация Telegram Web App
                if (window.Telegram && Telegram.WebApp) {
                    Telegram.WebApp.ready();
                    Telegram.WebApp.expand();
                    Telegram.WebApp.setBackgroundColor('#0c0c0c');
                }
            }
            
            spin() {
                if (this.isSpinning) return;
                if (this.currentBet > this.balance) {
                    this.showResult('Недостаточно средств!', false);
                    return;
                }
                
                this.isSpinning = true;
                this.spinButton.disabled = true;
                this.result.style.display = 'none';
                
                // Снимаем ставку с баланса
                this.balance -= this.currentBet;
                this.updateBalance();
                
                // Выбираем случайный сектор
                const winningSection = this.getRandomSection();
                const winAmount = this.currentBet * winningSection.multiplier;
                
                // Вычисляем угол вращения (3.5 оборота + угол выигрышного сектора)
                const targetAngle = 1260 + winningSection.angle + Math.random() * 45;
                
                // Запускаем анимацию
                this.wheel.style.transform = `rotate(${targetAngle}deg)`;
                
                // Показываем результат после завершения анимации
                setTimeout(() => {
                    this.balance += winAmount;
                    this.updateBalance();
                    
                    if (winAmount > 0) {
                        this.winsCount++;
                        this.winsCountElement.textContent = this.winsCount;
                    }
                    
                    this.showWinResult(winningSection.multiplier, winAmount);
                    this.isSpinning = false;
                    this.spinButton.disabled = false;
                    
                    // Отправляем результат в бота
                    this.sendResultToBot(winningSection.multiplier, winAmount);
                }, 3000);
            }
            
            getRandomSection() {
                const random = Math.random() * 100;
                let cumulativeProbability = 0;
                
                for (const section of this.sections) {
                    cumulativeProbability += section.probability;
                    if (random <= cumulativeProbability) {
                        return section;
                    }
                }
                
                return this.sections[0];
            }
            
            showWinResult(multiplier, winAmount) {
                this.result.style.display = 'block';
                this.currentMultiplierElement.textContent = multiplier + 'x';
                
                if (multiplier === 50) {
                    this.result.className = 'result jackpot';
                    this.resultText.innerHTML = '🎉 <strong class="jackpot-text">ДЖЕКПОТ!</strong> 🎉';
                    this.winAmount.innerHTML = `Коэффициент: <strong>${multiplier}x</strong><br>Выигрыш: <strong>${winAmount} ₽</strong>`;
                } else if (multiplier >= 10) {
                    this.result.className = 'result win';
                    this.resultText.innerHTML = '🎉 ОТЛИЧНЫЙ ВЫИГРЫШ!';
                    this.winAmount.innerHTML = `Коэффициент: <strong>${multiplier}x</strong><br>Выигрыш: <strong>${winAmount} ₽</strong>`;
                } else {
                    this.result.className = 'result win';
                    this.resultText.innerHTML = '🎉 ВЫ ВЫИГРАЛИ!';
                    this.winAmount.innerHTML = `Коэффициент: <strong>${multiplier}x</strong><br>Выигрыш: <strong>${winAmount} ₽</strong>`;
                }
            }
            
            showResult(message, isWin) {
                this.result.style.display = 'block';
                this.result.className = 'result';
                this.resultText.textContent = message;
                this.winAmount.textContent = '';
            }
            
            updateBalance() {
                this.balanceElement.textContent = this.balance.toLocaleString();
            }
            
            sendResultToBot(multiplier, winAmount) {
                if (window.Telegram && Telegram.WebApp) {
                    const data = {
                        multiplier: multiplier,
                        win_amount: winAmount,
                        bet_amount: this.currentBet,
                        balance: this.balance,
                        timestamp: new Date().toISOString()
                    };
                    
                    Telegram.WebApp.sendData(JSON.stringify(data));
                }
            }
        }
        
        // Инициализация игры при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            new WheelGame();
        });
    </script>
</body>
</html>